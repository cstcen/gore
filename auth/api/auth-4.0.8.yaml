openapi: 3.0.1
info:
  title: Auth - BETA
  version: "4.0.8"
servers:
  - url: https://api-{env}.xk5.com
    description: Development & Test Environment
    variables:
      env:
        enum:
          - sdev0
          - sdev
          - dev
          - dev2
          - dev3
          - mod
          - stg
        default: sdev0
        description: "sdev0: 藤蔓开发环境, sdev: 研发开发环境, dev/dev2: 研发测试环境"
  - url: https://api.xk5.com
    description: Production Environment
paths:
  /auth/v4.0/oauth2/authorize:
    get:
      description: OAuth2.0 - Endpoint Authorize
      tags:
        - oauth2
      security: [ ]
      parameters:
        - $ref: "#/components/parameters/ParamResponseType"
        - $ref: "#/components/parameters/ParamClientId"
        - $ref: "#/components/parameters/ParamRedirectUri"
        - $ref: "#/components/parameters/ParamState"
        - $ref: "#/components/parameters/ParamScope"
        - $ref: "#/components/parameters/ParamReplyingParty"
      responses:
        302:
          description: 跳转到指定登录页
          content:
            application/x-www-form-urlencoded:
              schema:
                $ref: "#/components/schemas/AuthorizationErrorResponse"
        400:
          description: 参数错误，请检查参数
        401:
          description: 鉴权错误，请检查client_id
  /auth/v4.0/oauth2/authenticate:
    post:
      description: OAuth2.0 - Endpoint Authenticate
      tags:
        - oauth2
      security: [ ]
      requestBody:
        $ref: "#/components/requestBodies/AuthenticationRequestBody"
      responses:
        200:
          $ref: "#/components/responses/AuthenticationResponse"
        400:
          description: 参数错误，请检查参数规范
        401:
          description: 鉴权失败
  /auth/v4.0/oauth2/token:
    post:
      description: OAuth2.0 - Endpoint Token
      tags:
        - oauth2
      security: [ ]
      requestBody:
        $ref: "#/components/requestBodies/PostTokenRequestBody"
      responses:
        200:
          $ref: "#/components/responses/TokenResponse"
  /auth/v4.0/oauth2/introspect:
    post:
      description: OAuth2.0 - Endpoint Introspect
      tags:
        - oauth2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  $ref: "#/components/schemas/ClientId"
                client_secret:
                  $ref: "#/components/schemas/ClientSecret"
                token:
                  $ref: "#/components/schemas/Token"
              required:
                - client_id
                - client_secret
                - token
            examples:
              Success:
                value: { "client_id": "53475851", "client_secret": "065c99135396c4044c00f1b38f63656d", "token": "636c3132db88cbc67c63c481495247f00e58804de7ef0f7c67d20e68d5abf0e88bef6abd6b4fdc36935122f10ba889ba4ca783838da544dbdbd726d4b4ef96e84619008da5ee2e09c26569d5729390792e462200aace69" }
      responses:
        200:
          description: Token JSON
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/IntrospectResponseBody"
              examples:
                Success:
                  value: { "active": true, "apn": 10001, "aud": [ "53475851", "user" ], "env": "sdev0", "exp": 1698137087, "iss": "https://i-api-sdev0.xk5.com/auth/v4.0", "jti": "sdev0:auth-v4:access_token:member:1000000001621701:app:10001:client:web", "lot": 1, "lov": "1j8Xy+iBNi1Qkkg/iKkaBP0h78gfTTxBWIdwskPgukPQHNV+rT+w6G8vwGzOillH", "men": 1000000001621701, "nic": "XK51000000001621701", "opi": "5266545B00F059C54E220819EDB00508", "pri": "http://thirdqq.qlogo.cn/g?b=oidb&k=0oVjPgj4ac4y8TNgwwnlZg&kti=ZPU3owAAAAA&s=40&t=1611302704", "red": 1693820963, "sub": "1000000001621701" }
  /auth/v4.0/oauth2/revoke:
    post:
      description: OAuth2.0 - Endpoint Revoke
      tags:
        - oauth2
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  $ref: "#/components/schemas/ClientId"
                client_secret:
                  $ref: "#/components/schemas/ClientSecret"
                token:
                  $ref: "#/components/schemas/Token"
              required:
                - client_id
                - client_secret
                - token
      responses:
        200:
          description: the token has bean revoked successfully.
  /auth/v4.0/replyingparty/{ReplyingParty}/callback:
    get:
      security: [ ]
      description: 用于三方授权登录回调
      parameters:
        - $ref: "#/components/parameters/PathReplyingParty"
        - $ref: "#/components/parameters/ParamAuthorizationCode"
        - $ref: "#/components/parameters/ParamResponseType"
        - $ref: "#/components/parameters/ParamClientId"
        - $ref: "#/components/parameters/ParamRedirectUri"
        - $ref: "#/components/parameters/ParamState"
        - $ref: "#/components/parameters/ParamScope"
      responses:
        302:
          description: 重定向到`redirect_uri`地址
  /auth/v4.1/sso/login:
    post:
      description: 游戏登录接口
      tags:
        - sso
      security: [ ]
      parameters:
        - $ref: '#/components/parameters/ParamDeviceId'
      requestBody:
        $ref: "#/components/requestBodies/PostTokenRequestBody"
      responses:
        200:
          $ref: '#/components/responses/V41SsoLoginResponse'
  /auth/v4.1/sso/heartbeat:
    post:
      deprecated: true
      description: 游戏心跳接口
      tags:
        - sso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  $ref: "#/components/schemas/ClientId"
                client_secret:
                  $ref: "#/components/schemas/ClientSecret"
                token:
                  $ref: "#/components/schemas/Token"
              required:
                - client_id
                - client_secret
                - token
      responses:
        200:
          description: Token JSON
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResultResponse"
                  - type: object
                    properties:
                      data:
                        $ref: "#/components/schemas/IntrospectResponseBody"
  /auth/v4.1/sso/logout:
    post:
      description: 游戏登出接口
      tags:
        - sso
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                client_id:
                  $ref: "#/components/schemas/ClientId"
                client_secret:
                  $ref: "#/components/schemas/ClientSecret"
                token:
                  $ref: "#/components/schemas/Token"
              required:
                - client_id
                - client_secret
                - token
      responses:
        200:
          description: the token has bean revoked successfully.
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/BaseResultResponse"
  /auth/v4.1/member_auth_info:
    get:
      description: 查询MemberAuthInfo表
      security:
        - Oauth2: [ ]
        - Basic: [ ]
      parameters:
        - name: memberNo
          in: query
          schema:
            $ref: "#/components/schemas/MemberNo"
        - name: loginType
          in: query
          schema:
            type: integer
        - name: loginValue
          in: query
          schema:
            type: string
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                allOf:
                  - $ref: "#/components/schemas/BaseResultResponse"
                  - type: object
                    properties:
                      data:
                        type: object
                        properties:
                          list:
                            type: array
                            items:
                              $ref: "#/components/schemas/MemberAuthDetail"
components:
  securitySchemes:
    Oauth2:
      type: oauth2
      flows:
        authorizationCode:
          authorizationUrl: https://api-sdev0.xk5.com/gateway/v2.0/auth/v4.0/oauth2/authorize
          tokenUrl: https://api-sdev0.xk5.com/gateway/v2.0/auth/v4.0/oauth2/token
    Basic:
      type: http
      scheme: basic
  schemas:
    AnyValue: { }
    V41SsoLoginResponseData:
      allOf:
        - $ref: "#/components/schemas/AccessTokenResponse"
        - type: object
          properties:
            member:
              $ref: '#/components/schemas/JsonWebTokenMember'
    MemberNo:
      type: integer
      format: int64
    MemberAuthDetail:
      type: object
      properties:
        member_no:
          $ref: "#/components/schemas/MemberNo"
        login_type:
          type: integer
          description: |
            * `1` - Qq
            * `2` - Wx
            * `3` - Phone
            * `4` - Pwd
            * `5` - SgxqMsdkQq
            * `6` - SgxqMsdkWx
            * `7` - Wegame
        login_value:
          type: string
        create_time:
          type: integer
          format: int64
          description: Unix Time
        update_time:
          type: integer
          format: int64
          description: Unix Time
      required:
        - member_no
        - login_type
        - login_value
        - create_time
        - update_time
    IntrospectResponseBody:
      allOf:
        - type: object
          properties:
            active:
              type: boolean
              description: Boolean indicator of whether or not the presented token is currently active.
          required:
            - active
        - $ref: "#/components/schemas/AccessToken"
    Token:
      type: string
      description: The string value of the token.
    Username:
      type: string
      description: The resource owner username.
    Password:
      type: string
      description: The resource owner password.
    PhoneNo:
      type: string
      description: 手机号码
      example: 17688890868
    VerificationCode:
      type: string
      description: 手机验证码
      example: 154784
    PostTokenRequestBodyAuthorizationCode:
      type: object
      properties:
        code:
          $ref: "#/components/schemas/AuthorizationCode"
      required:
        - code
    PostTokenRequestBodyPassword:
      type: object
      properties:
        username:
          $ref: "#/components/schemas/Username"
        password:
          $ref: "#/components/schemas/Password"
      required:
        - username
        - password
    PostTokenRequestBodyPhone:
      type: object
      properties:
        phone_no:
          $ref: "#/components/schemas/PhoneNo"
        verification_code:
          $ref: "#/components/schemas/VerificationCode"
        scene:
          $ref: "#/components/schemas/VerificationCodeScene"
      required:
        - phone_no
        - verification_code
    PostTokenRequestBodyQq:
      type: object
      properties:
        qq_code:
          type: string
          description: QQ Code
      required:
        - qq_code
    PostTokenRequestBodyWx:
      type: object
      properties:
        wx_code:
          type: string
          description: WX Code
      required:
        - wx_code
    PostTokenRequestBodyMsdk:
      type: object
      properties:
        msdk_channel_id:
          $ref: "#/components/schemas/MsdkChannelId"
        msdk_os:
          $ref: "#/components/schemas/MsdkOs"
        msdk_openid:
          $ref: "#/components/schemas/OpenId"
        msdk_token:
          $ref: "#/components/schemas/Token"
        msdk_gender:
          $ref: "#/components/schemas/Gender"
        msdk_nickname:
          $ref: "#/components/schemas/NickName"
        msdk_profile_img:
          $ref: "#/components/schemas/AvatarUrl"
        network_type:
          $ref: '#/components/schemas/NetworkType'
        privilege_launch_type:
          $ref: '#/components/schemas/PrivilegeLaunchType'
        is_simulator:
          $ref: '#/components/schemas/IsSimulator'
        channel_id:
          $ref: '#/components/schemas/ChannelId'
      required:
        - msdk_channel_id
        - msdk_os
        - msdk_openid
        - msdk_token
        - msdk_gender
        - msdk_nickname
        - msdk_profile_img
        - network_type
    PostTokenRequestBodyRefreshToken:
      type: object
      properties:
        refresh_token:
          type: string
      required:
        - refresh_token
    PcSdkSsoRequestBodyScene:
      $ref: "#/components/schemas/VerificationCodeScene"
    VerificationCodeScene:
      type: string
      enum:
        - develop_community_login_register
        - develop_community_bind
        - sgxq_app_login_register
        - sgxq_app_bind
        - xk5_oauth2
    ClientType:
      type: integer
      description: |
        * `0` - WEB
        * `1` - ANDROID
        * `2` - IOS
        * `3` - PC
      enum:
        - 0
        - 1
        - 2
        - 3
    OsType:
      type: string
      description: |
        * `WEB`
        * `ANDROID`
        * `IOS`
        * `PC`
    EncryptedToken:
      type: string
      description: 加密的token
    JsonWebTokenMember:
      type: object
      properties:
        men:
          type: integer
          format: int64
          description: MemberNo
        opi:
          type: string
          description: OpenId
        apn:
          type: integer
          description: ApplicationNo
        nic:
          type: string
          description: Nickname
        pri:
          type: string
          description: ProfileImg
        lot:
          type: integer
          description: |
            LoginType:
            * `1` - Qq
            * `2` - Wx
            * `3` - Phone
            * `4` - Pwd
            * `5` - SgxqMsdkQq
            * `6` - SgxqMsdkWx
            * `7` - Wegame
        lov:
          type: string
          description: |
            LoginValue，根据LoginType不同，而产生不同的LoginValue。
            LoginType:
            * `1` - LoginValue=Qq OpenId
            * `2` - LoginValue=Wx OpenId
            * `3` - LoginValue=Phone Number
            * `4` - LoginValue=Username
            * `5` - LoginValue=SgxqMsdkQq OpenId
            * `6` - LoginValue=SgxqMsdkWx OpenId
            * `7` - LoginValue=Wegame RailId
        ifl:
          type: boolean
          description: IsFirstLogin
        chi:
          type: string
          description: ChannelId
        red:
          type: integer
          format: int64
          description: RegisteredDate
        lpld:
          type: string
          format: YYYYMMdd
          description: LastPrivilegeLaunchDate
    AccessToken:
      type: object
      description: The access token issued by the authorization server.
      allOf:
        - $ref: "#/components/schemas/JsonWebTokenStandard"
        - $ref: "#/components/schemas/JsonWebTokenMember"
      example: "a83d7e22559f5b4a9269995311967e89a1b85ea8da3bae7116bf6507541f41d306778c949c26af26789a5d9d2422dc85c43573f712a7ac1892d6994a6c0ddac108d99f9140a4b8fe112ae48e13fe3cb3ebd4dd1b3f"
    RefreshToken:
      type: object
      description: The refresh token, which can be used to obtain new access tokens using the same authorization grant.
      allOf:
        - $ref: "#/components/schemas/JsonWebTokenStandard"
        - $ref: "#/components/schemas/JsonWebTokenMember"
      example: "e0aca0a308f65d98e32df6dee50cdbd16e15043ef9e11aa2f62d0cd61b6e20444bd450b37d7512c294f28e6b16c02456537e71c4618ea69fda2948869e887a496f81503227c5bbc9d09d032b588e1f7cf40de3398b28"
    TokenType:
      type: string
      enum:
        - Basic
        - Bearer
      description: The type of the token issued.
      example: Bearer
    ExpiresIn:
      type: integer
      format: int64
      description: The lifetime in seconds of the access token.
      example: 3600
    GrantType:
      type: string
      enum:
        - client_credentials
        - authorization_code
        - refresh_token
        - password
        - phone
        - qq
        - wx
        - msdk
    Scope:
      type: string
      description: The scope of the access request, comma separation
      example: xas_login
    ResponseType:
      type: string
      enum:
        - code
        - token
      example: code
    AuthenticationMode:
      type: string
      enum:
        - XK5PHONE
        - XK5PWD
        - XK5MSDK
        - XK5PCSDKPWD
        - XK5PCSDKPHONE
      description: |
        * `XK5PHONE` - 手机号验证码认证方式
        * `XK5PWD` - 用户名密码认证方式
        * `XK5MSDK` - MSDK认证方式
        * `XK5PCSDKPWD` - PC SDK 用户名密码认证方式
        * `XK5PCSDKPHONE` - PC SDK 手机号认证方式
      example: XK5PHONE
    ClientId:
      type: string
      description: The client identifier
      example: xyzqwdaKDjf
    ClientSecret:
      type: string
      description: The client secret
      example: 7FdacDF54w654f
    RedirectUri:
      type: string
      description: URL Encoding
      example: https%3A%2F%2Fclient%2Eexample%2Ecom%2Fcb
    AuthorizationCode:
      type: string
      description: |
        The authorization code generated by the authorization server.
        It's valid for 10 minutes.
      example: Splx10BeZQQYbYS6WxSbIA
    State:
      type: string
      description: The parameter should be used for preventing cross-site request forgery
      example: xyz
    Issuer:
      type: string
      description: issuer of the JWT
      example: https://api.xk5.com
    Subject:
      type: string
      description: Subject of the JWT
      example: USER_ID
    Audience:
      type: array
      items:
        type: string
      description: |
        audience: Recipient for which the JWT is intended
      example: https://api.xk5.com
    expiresAt:
      type: integer
      format: int64
      description: |
        expiration time: Time after which the JWT expires
      example: 1490922820
    JwtId:
      type: string
      description: |
        jwt id
    DeviceId:
      type: string
      description: 设备唯一标识符(e.g. IMEI值)
      example: 34_W1OLJH8zY-RRRprRBuIMTev_l0TA8FnWSr0_IG8RqKnOB017c0qQiPgQRk8mo-n1hRmhJy8V-Y3r8fKjzNjfNflAVtXYXcaDlJQO4cPF8ZE
    JsonWebTokenStandard:
      type: object
      properties:
        iss:
          $ref: "#/components/schemas/Issuer"
        sub:
          $ref: "#/components/schemas/Subject"
        aud:
          $ref: "#/components/schemas/Audience"
        exp:
          $ref: "#/components/schemas/expiresAt"
        jti:
          $ref: "#/components/schemas/JwtId"
        did:
          $ref: "#/components/schemas/DeviceId"
        clt:
          $ref: "#/components/schemas/ClientType"
        env:
          $ref: '#/components/schemas/Environment'
        sim:
          type: boolean
          description: Simulator
    Environment:
      type: string
      description: Environment
      enum:
        - tdev
        - sdev0
        - sdev
        - dev
        - dev2
        - dev3
        - mod
        - stg
        - xk5
    OpenId:
      type: string
      description: 第三方唯一标识
    OpenType:
      type: string
      description: 第三方名称
      enum:
        - qq
        - wx
        - apple
        - guest
    ChannelId:
      type: string
      description: 渠道ID
    MsdkChannelId:
      type: integer
      description: |
        Msdk 登录渠道
        * `1` - 微信
        * `2` - 手Q
        * `3` - 游客
        * `4` - Facebook
        * `5` - GameCenter
        * `6` - GooglePlay
        * `7` - IEGPass
        * `9` - Twitter
        * `10` - Garena
        * `11` - SelfAccount
        * `12` - EGame
        * `14` - Line
        * `15` - Signin with Apple
        * `17` - Kwai
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 9
        - 10
        - 11
        - 12
        - 13
        - 14
        - 15
        - 17
    ChannelName:
      type: string
      description: 渠道名称
    DeviceName:
      type: string
      description: 设备名称
    MsdkOs:
      type: integer
      description: |
        操作系统标示
        * `1` - Android
        * `2` - iOS
        * `3` - Web
        * `4` - Linux
        * `5` - Windows
      enum:
        - 1
        - 2
        - 3
        - 4
        - 5
    OsVersion:
      type: string
      description: 系统版本
    SsoResponseDataAccountInfoAccountType:
      type: integer
      description: |
        * `0` - guest
        * `1` - xk5
        * `2` - xk5 phone
        * `3` - wechat qr
        * `4` - wechat
        * `5` - pc wechat
        * `6` - apple id
        * `7` - pc qq
        * `8` - qq
        * `9` - tencent guest
        * `10` - pc wegame
        * `11` - platform online
        * `12` - platform join 
        * `14` - platform email 
        * `15` - platform phone 
        * `16` - platform id 
        * `99` - market cn
      enum:
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
        - 6
        - 7
        - 8
        - 9
        - 10
        - 11
        - 12
        - 14
        - 15
        - 16
        - 99
    NetworkType:
      type: integer
      description: |
        网络情况类型:
        * `-1` - unknown 
        * `0` - no connect 
        * `1` - WIFI 
        * `2` - 2G网络
        * `3` - 3G网络 
        * `4` - 4G网络 
        * `5` - 5G网络
      enum:
        - -1
        - 0
        - 1
        - 2
        - 3
        - 4
        - 5
    IsSimulator:
      type: boolean
      description: 是否是模拟器
    PrivilegeType:
      type: string
      description: |
        特权启动类型:
        * `Wx_GameCenter` - 微信
        * `sq_gamecenter` - 手Q
      enum:
        - Wx_GameCenter
        - sq_gamecenter
        - ""
      nullable: true
    PrivilegeLaunchType:
      type: string
      description: |
        特权启动类型:
        * `WX` - 微信
        * `QQ` - 手Q
      enum:
        - WX
        - QQ
    AvatarUrl:
      type: string
      description: 头像链接
      format: uri
    NickName:
      type: string
      description: 用户名称
    Gender:
      type: integer
      description: |
        性别：
        * `0` - 未定义
        * `1` - 男
        * `2` - 女
      enum:
        - 0
        - 1
        - 2
    SdkDeviceInfo:
      type: object
      properties:
        device_id:
          type: string
          nullable: true
        device_name:
          type: string
          nullable: true
        transaction_id:
          type: string
          nullable: true
        mnc:
          type: string
          nullable: true
        mcc:
          type: string
          nullable: true
        os_name:
          type: string
          nullable: true
        os_version:
          type: string
          nullable: true
        rooting:
          type: string
          nullable: true
        phone_number:
          type: string
          nullable: true
        language:
          type: string
          nullable: true
        country:
          type: string
          nullable: true
        adid:
          type: string
          nullable: true
        idfv:
          type: string
          nullable: true
    SdkLoginType:
      type: integer
      enum:
        - 2
        - 4
        - 8
        - 10
        - 16
      description: |
        登录类型：
        * `2` - Phone
        * `4` - Wechat
        * `8` - QQ
        * `10` - WeGame
        * `16` - PWD
    SdkUserInfo:
      type: object
      properties:
        open_id:
          type: string
        gender:
          $ref: "#/components/schemas/Gender"
        user_name:
          type: string
        picture_url:
          type: string
    BaseResultResponse:
      type: object
      description: 见公共返回码列表
      properties:
        code:
          type: integer
        message:
          type: string
      required:
        - code
        - message
    TokenErrorResponse:
      type: object
      description: |
        error code from the following:
        * `invalid_request` 
        * `invalid_client` 
        * `invalid_grant` 
        * `unauthorized_client` 
        * `unsupported_grant_type` 
        * `invalid_scope`
      properties:
        error:
          type: string
          enum:
            - invalid_request
            - invalid_client
            - invalid_grant
            - unauthorized_client
            - unsupported_grant_type
            - invalid_scope
        error_description:
          type: string
      required:
        - error
    AuthorizationErrorResponse:
      type: object
      description: |
        error code from the following:
        * `invalid_request` 
        * `unauthorized_client` 
        * `access_denied` 
        * `unsupported_response_type` 
        * `invalid_scope` 
        * `server_error`
        * `temporarily_unavailable`
      properties:
        error:
          type: string
          enum:
            - invalid_request
            - unauthorized_client
            - access_denied
            - unsupported_response_type
            - invalid_scope
            - server_error
            - temporarily_unavailable
        error_description:
          type: string
      required:
        - error
    AccessTokenResponse:
      type: object
      properties:
        access_token:
          $ref: "#/components/schemas/AccessToken"
        token_type:
          $ref: "#/components/schemas/TokenType"
        expires_in:
          $ref: "#/components/schemas/ExpiresIn"
        refresh_token:
          $ref: "#/components/schemas/RefreshToken"
        scope:
          $ref: "#/components/schemas/Scope"
      required:
        - access_token
        - token_type
    AuthenticationResponseData:
      type: object
      properties:
        redirect_uri:
          $ref: "#/components/schemas/RedirectUri"
      required:
        - redirect_uri
    AuthenticationRequestBodyLoginTypeXk5Pwd:
      type: object
      properties:
        client_id:
          $ref: "#/components/schemas/ClientId"
        redirect_uri:
          $ref: "#/components/schemas/RedirectUri"
        state:
          $ref: "#/components/schemas/State"
        username:
          $ref: "#/components/schemas/Username"
        password:
          $ref: "#/components/schemas/Password"
      required:
        - client_id
        - redirect_uri
        - state
        - username
        - password
    AuthenticationRequestBodyLoginTypeXk5Phone:
      type: object
      properties:
        client_id:
          $ref: "#/components/schemas/ClientId"
        redirect_uri:
          $ref: "#/components/schemas/RedirectUri"
        state:
          $ref: "#/components/schemas/State"
        phone_no:
          type: string
          description: 手机号码
          example: 17688890868
        verification_code:
          type: string
          description: 手机验证码
          example: 154784
      required:
        - client_id
        - redirect_uri
        - state
        - phone_no
        - verification_code
    AuthenticationRequestBodyLoginTypeXk5Msdk:
      type: object
      properties:
        client_id:
          $ref: "#/components/schemas/ClientId"
        client_secret:
          $ref: "#/components/schemas/ClientSecret"
        open_id:
          $ref: "#/components/schemas/OpenId"
        token:
          type: string
          description: 第三方用户凭证
        channel_id:
          $ref: "#/components/schemas/MsdkChannelId"
        install_channel_id:
          $ref: "#/components/schemas/ChannelId"
        picture_url:
          $ref: "#/components/schemas/AvatarUrl"
        nick_name:
          $ref: "#/components/schemas/NickName"
        gender:
          $ref: "#/components/schemas/Gender"
        privilege_type:
          $ref: "#/components/schemas/PrivilegeType"
        device_id:
          $ref: "#/components/schemas/DeviceId"
        device_name:
          $ref: "#/components/schemas/DeviceName"
        os:
          $ref: "#/components/schemas/MsdkOs"
        os_version:
          $ref: "#/components/schemas/OsVersion"
        network_type:
          $ref: "#/components/schemas/NetworkType"
        is_simulator:
          $ref: "#/components/schemas/IsSimulator"
      required:
        - client_id
        - client_secret
        - open_id
        - token
        - os
        - channel_id
    AuthenticationRequestBodyLoginTypeXk5PcSdkPwd:
      type: object
      properties:
        client_id:
          $ref: "#/components/schemas/ClientId"
        client_secret:
          $ref: "#/components/schemas/ClientSecret"
        username:
          $ref: "#/components/schemas/Username"
        password:
          $ref: "#/components/schemas/Password"
      required:
        - client_id
        - client_secret
        - username
        - password
    AuthenticationRequestBodyLoginTypeXk5PcSdkPhone:
      type: object
      properties:
        client_id:
          $ref: "#/components/schemas/ClientId"
        client_secret:
          $ref: "#/components/schemas/ClientSecret"
        phone_no:
          type: string
          description: 手机号
          example: 17688890868
        verification_code:
          type: string
          description: 验证码
          example: 621548
      required:
        - client_id
        - client_secret
        - phone_no
        - verification_code
    SsoLoginResponseDataAccountInfoTermsInfo:
      type: object
      properties:
        language:
          type: string
        terms_type:
          type: string
        terms_url:
          type: string
    SsoLoginResponseDataAccountInfo:
      type: object
      properties:
        access_token:
          $ref: "#/components/schemas/AccessToken"
        account_nickname:
          type: string
        account_type:
          $ref: "#/components/schemas/SsoResponseDataAccountInfoAccountType"
        expires_in:
          type: integer
        game_access_token:
          $ref: "#/components/schemas/AccessToken"
        last_launch_time:
          type: string
        member_id:
          type: string
        member_no:
          type: integer
        picture_url:
          type: string
        provider_cd:
          type: string
        rail_id:
          type: string
        refresh_token:
          $ref: "#/components/schemas/RefreshToken"
        terms_info:
          type: string
        terms_list:
          type: array
          items:
            $ref: "#/components/schemas/SsoLoginResponseDataAccountInfoTermsInfo"
    SsoNoticeInfo:
      type: object
      properties:
        notice_code:
          type: integer
        notice_title:
          type: string
        notice_message:
          type: string
        notice_url:
          type: string
    Notice:
      type: object
      properties:
        title:
          type: string
        message:
          type: string
    SsoUpdateInfo:
      type: object
      properties:
        update_code:
          type: integer
        package_name:
          type: string
        update_version:
          type: string
        update_url:
          type: string
        notice_url:
          type: string
    SsoLoginResponseData:
      type: object
      properties:
        account_info:
          $ref: "#/components/schemas/SsoLoginResponseDataAccountInfo"
        extra_data:
          type: string
        member_no:
          type: string
        nickname:
          type: string
        notice_info:
          $ref: "#/components/schemas/SsoNoticeInfo"
        open_id:
          type: string
    SsoHeartbeatResponseData:
      type: object
      properties:
        access_token:
          $ref: "#/components/schemas/AccessToken"
        server_timestamp:
          type: integer
          format: int64
        notice_info:
          $ref: "#/components/schemas/SsoNoticeInfo"
    SsoMsdkLoginRequestBody:
      type: object
      properties:
        access_token:
          type: string
          description: 腾讯的token
        channel_id:
          type: string
          description: 渠道ID
        client_id:
          type: string
        client_secret:
          type: string
        device_info:
          $ref: "#/components/schemas/SdkDeviceInfo"
        extra_json:
          type: string
        login_type:
          $ref: "#/components/schemas/SdkLoginType"
        network_type:
          type: string
        open_id:
          type: string
        password:
          type: string
        push_id:
          type: string
        refresh_token:
          type: string
        reg_channel_dis:
          type: string
        start_way:
          $ref: "#/components/schemas/PrivilegeType"
        user_info:
          $ref: "#/components/schemas/SdkUserInfo"
        is_force:
          type: boolean
          description: 是否强制登入
      required:
        - client_id
        - client_secret
        - device_info
    SsoMsdkAutoLoginRequestBody:
      allOf:
        - $ref: "#/components/schemas/SsoMsdkLoginRequestBody"
        - type: object
          properties:
            refresh_token:
              $ref: "#/components/schemas/Token"
    SsoPcSdkAutoLoginRequestBody:
      allOf:
        - $ref: "#/components/schemas/SsoPcSdkLoginRequestBody"
        - type: object
          properties:
            refresh_token:
              $ref: "#/components/schemas/Token"
    SsoPcSdkLoginRequestBody:
      type: object
      properties:
        game_version:
          type: string
          nullable: true
        user:
          $ref: "#/components/schemas/SdkUserInfo"
        client_id:
          type: string
        client_secret:
          type: string
        member_id:
          type: string
        password:
          type: string
          nullable: true
        login_type:
          $ref: "#/components/schemas/SdkLoginType"
        device_info:
          $ref: "#/components/schemas/SdkDeviceInfo"
        push_id:
          type: string
          nullable: true
        network_type:
          type: string
          nullable: true
        rail_id:
          type: string
          nullable: true
        rail_session_ticket:
          type: string
          nullable: true
        game_id:
          type: integer
          nullable: true
        channel_id:
          type: integer
        verification_code:
          type: string
          nullable: true
        scene:
          $ref: "#/components/schemas/PcSdkSsoRequestBodyScene"
        is_force:
          type: boolean
          description: 是否强制登入
      required:
        - client_id
        - client_secret
        - device_info
  parameters:
    ParamAuthorization:
      name: Authorization
      in: header
      description: token
      schema:
        $ref: "#/components/schemas/Token"
    ParamChannelId:
      name: ChannelId
      in: header
      description: 渠道ID
      schema:
        $ref: '#/components/schemas/ChannelId'
    ParamDeviceId:
      name: Device-Id
      in: header
      description: 设备唯一标识符(e.g. IMEI值)
      schema:
        $ref: "#/components/schemas/DeviceId"
      example: 34_W1OLJH8zY-RRRprRBuIMTev_l0TA8FnWSr0_IG8RqKnOB017c0qQiPgQRk8mo-n1hRmhJy8V-Y3r8fKjzNjfNflAVtXYXcaDlJQO4cPF8ZE
      required: false
    ParamRefreshToken:
      name: Authorization
      in: header
      description: refresh_token
      schema:
        $ref: "#/components/schemas/EncryptedToken"
      required: false
    ParamUserAgent:
      name: User-Agent
      in: header
      schema:
        type: string
        nullable: true
      example: AppleWebKit/537.36 Chrome/51.0.2704.103
      required: false
    ParamResponseType:
      name: response_type
      in: query
      schema:
        $ref: "#/components/schemas/ResponseType"
      required: true
    ParamClientId:
      name: client_id
      in: query
      schema:
        $ref: "#/components/schemas/ClientId"
      required: true
    ParamRedirectUri:
      name: redirect_uri
      in: query
      schema:
        $ref: "#/components/schemas/RedirectUri"
      required: true
    ParamState:
      name: state
      in: query
      schema:
        $ref: "#/components/schemas/State"
      required: true
    ParamScope:
      name: scope
      in: query
      schema:
        $ref: "#/components/schemas/Scope"
      allowEmptyValue: true
    ParamAuthorizationCode:
      name: code
      in: query
      schema:
        $ref: "#/components/schemas/AuthorizationCode"
      required: true
    ParamReplyingParty:
      name: rp
      in: query
      schema:
        $ref: "#/components/schemas/OpenType"
      description: 依赖方，例如：使用QQ授权登录
    PathReplyingParty:
      name: ReplyingParty
      in: path
      schema:
        $ref: "#/components/schemas/OpenType"
      description: 依赖方，例如：使用QQ授权登录
      required: true
  requestBodies:
    AuthenticationRequestBody:
      content:
        application/json:
          schema:
            type: object
            allOf:
              - type: object
                properties:
                  authentication_mode:
                    $ref: "#/components/schemas/AuthenticationMode"
                  response_type:
                    $ref: "#/components/schemas/ResponseType"
                required:
                  - authentication_mode
                  - response_type
              - oneOf:
                  - $ref: "#/components/schemas/AuthenticationRequestBodyLoginTypeXk5Pwd"
                  - $ref: "#/components/schemas/AuthenticationRequestBodyLoginTypeXk5Phone"
    PostTokenRequestBody:
      content:
        application/json:
          schema:
            readOnly: true
            type: object
            allOf:
              - type: object
                properties:
                  grant_type:
                    $ref: "#/components/schemas/GrantType"
                  client_id:
                    $ref: "#/components/schemas/ClientId"
                  client_secret:
                    $ref: "#/components/schemas/ClientSecret"
                required:
                  - grant_type
                  - client_id
                  - client_secret
              - anyOf:
                  - $ref: "#/components/schemas/PostTokenRequestBodyAuthorizationCode"
                  - $ref: "#/components/schemas/PostTokenRequestBodyRefreshToken"
                  - $ref: "#/components/schemas/PostTokenRequestBodyPassword"
                  - $ref: "#/components/schemas/PostTokenRequestBodyPhone"
                  - $ref: "#/components/schemas/PostTokenRequestBodyQq"
                  - $ref: "#/components/schemas/PostTokenRequestBodyWx"
                  - $ref: "#/components/schemas/PostTokenRequestBodyMsdk"
                  - $ref: "#/components/schemas/AnyValue"
          examples:
            RefreshToken:
              $ref: "#/components/examples/Oauth2TokenRequestRefreshToken"
            AuthorizationCode:
              $ref: "#/components/examples/Oauth2TokenRequestAuthorizationCode"
            Msdk:
              value: {"channel_id":"00000000","client_id":"c2d4cV9tc2RrX2FuZHJvaWQ\u003d","client_secret":"91437c07385a6a1f405d14500be21079","grant_type":"msdk","is_simulator":false,"msdk_channel_id":2,"msdk_gender":0,"msdk_nickname":"黑色玫瑰qqq","msdk_openid":"A14DFE32B29EFF3218DDB0C24CD5D39C","msdk_os":1,"msdk_profile_img":"http://thirdqq.qlogo.cn/g?b\u003doidb\u0026k\u003dVefvgJh2N350iab1D1l8waw\u0026kti\u003dZTY-VAAAAAE\u0026s\u003d100\u0026t\u003d1598620388","msdk_token":"967A8DE0D4F1AB4772196DA05DDE0A54","network_type":1}
    PutTokenRequestBody:
      content:
        application/json:
          schema:
            type: object
            allOf:
              - type: object
                properties:
                  grant_type:
                    $ref: "#/components/schemas/GrantType"
                  client_id:
                    $ref: "#/components/schemas/ClientId"
                  client_secret:
                    $ref: "#/components/schemas/ClientSecret"
                required:
                  - grant_type
                  - client_id
                  - client_secret
    TokenCheckRequestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/AccessToken"
    MsdkLoginRequestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SsoMsdkLoginRequestBody"
    PcSdkLoginRequestBody:
      content:
        application/json:
          schema:
            $ref: "#/components/schemas/SsoPcSdkLoginRequestBody"
  responses:
    AuthenticationResponse:
      description: |
        根据请求参数`response_type`
        * `code` - 返回授权码
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResultResponse"
              - properties:
                  data:
                    $ref: "#/components/schemas/AuthenticationResponseData"

    TokenResponse:
      description: OK
      content:
        application/json:
          schema:
            oneOf:
              - $ref: "#/components/schemas/TokenErrorResponse"
              - $ref: "#/components/schemas/AccessTokenResponse"
          examples:
            Success:
              $ref: "#/components/examples/Oauth2TokenResponseSuccess"
            Fail:
              $ref: "#/components/examples/Oauth2TokenResponseFail"
    V40SsoLoginResponse:
      description: OK
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResultResponse"
              - type: object
                properties:
                  data:
                    $ref: "#/components/schemas/SsoLoginResponseData"
                required:
                  - data
          examples:
            Success:
              value: { "code": 0, "data": { "account_info": { "access_token": "c02e5ccc811d90a2c859868ce6f796632dc168788306bee638af92d1d62a1ef5a571716d5637388c6e6ade639a1b9c21b6a4e23e4eb26fccdebc3393e421f84053f4b59bf74991ccecd7bb94c86e63c507c7012c5eebf557", "account_nickname": "", "account_type": 2, "expires_in": 21600, "game_access_token": "62e7cccbe88d1fc7042480755e4b6e14c7ba16c848e0884aafa4272479822e9191033efebfb5ec53d0762f84d398d5f99dd80d7baca41c7ac4fc65a496be60e964903e9d6f2134fbdf6cb020050120689387203e054b780c", "last_launch_time": "", "member_id": "17688890868", "member_no": 1000000000771703, "picture_url": "https://m-static-tsdev0-1255385461.file.myqcloud.com/image/default_profile_135x135.png", "provider_cd": "", "refresh_token": "6c6cfb3a3fa1c7aefa89fb89f44f145563abad99c8f79b8e9241d8ca0b072e23c22ee80c1e63c0768b6593527f08f2a101d519254a78c842c004552b71e3df6b17d23f46e4506b5d5e6e36d5b445b08d1309f6b4294fbc379a", "terms_info": "https://m-static-t${spring.profiles.active}-1255385461.file.myqcloud.com/terms/projectB/terms_projectb.txt" }, "notice_info": { "notice_code": 0, "notice_message": "", "notice_title": "", "notice_url": "" } }, "message": "OK" }
    SsoHeartbeatResponse:
      description: OK
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResultResponse"
              - type: object
                properties:
                  data:
                    $ref: "#/components/schemas/SsoHeartbeatResponseData"
                required:
                  - data
    TokenCheckResponse:
      description: OK
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResultResponse"
              - properties:
                  data:
                    $ref: "#/components/schemas/AccessToken"
    V41SsoLoginResponse:
      description: OK
      content:
        application/json:
          schema:
            allOf:
              - $ref: "#/components/schemas/BaseResultResponse"
              - type: object
                properties:
                  data:
                    $ref: '#/components/schemas/V41SsoLoginResponseData'
          examples:
            Success:
              $ref: "#/components/examples/SsoLoginResponseSuccess"
            Fail:
              $ref: "#/components/examples/SsoLoginResponseFail"
  examples:
    Oauth2TokenRequestRefreshToken:
      value: {
        "grant_type": "refresh_token",
        "client_id": "53475851",
        "client_secret": "065c99135396c4044c00f1b38f63656d",
        "refresh_token": "154b849347e34503fb1ebac54794441b120a6e1a20235c0dfaf81b6420d89ecfa2a600991d97de09f970484e715214057d0aa88c20bbb65191d7a4cd2ceaee6a0c794062358f1b8a04fe7193566314daa84b93afa4d9"
      }
    Oauth2TokenRequestPassword:
      value: {
        "grant_type": "password",
        "client_id": "53475851",
        "client_secret": "065c99135396c4044c00f1b38f63656d",
        "username": "123456",
        "password": "70541e08e51a38384c1d228d2414811e590841dc8be0"
      }
    Oauth2TokenRequestAuthorizationCode:
      value: {
        "grant_type": "authorization_code",
        "client_id": "53475851",
        "client_secret": "065c99135396c4044c00f1b38f63656d",
        "code": "d513b27b5f4a39a2021038402fa6730e"
      }
    Oauth2TokenRequestPhone:
      value: {
        "grant_type": "phone",
        "client_id": "53475851",
        "client_secret": "065c99135396c4044c00f1b38f63656d",
        "phone_no": "17688890868",
        "verification_code": "123123"
      }
    Oauth2TokenResponseSuccess:
      value: {
        "access_token": "9856d6f1dc4f32bbc5889179c48d3a0d1c4ee71cbcdf9f440a651cbfbe26cad6ef4d70b301313fc0e700b03933fcf4dce65c0bb4e6f5f4721354a9b5c25f4938f4c770dce3390b0493a40ffba6e94325645e89a379",
        "expires_in": 21600,
        "refresh_token": "8154794f239cd9fcbe6c63b77b7f0d77719ad74fc1701652d7cd0404d85dbb684f0f3085f7bf595e2c4bdb29d750a0a2d02263bb801ff30cdd626f45c92e3234ec4e2cf5e9ce82f611bef1eaf0671ababc10f11e3589",
        "token_type": "Bearer"
      }
    Oauth2TokenResponseFail:
      value: {
        "error": "invalid_request"
      }
    SsoLoginResponseSuccess:
      value: {
        "code": 0,
        "data": {
          "access_token": "a83d7e22559f5b4a9269995311967e89a1b85ea8da3bae7116bf6507541f41d306778c949c26af26789a5d9d2422dc85c43573f712a7ac1892d6994a6c0ddac108d99f9140a4b8fe112ae48e13fe3cb3ebd4dd1b3f",
          "expires_in": 21600,
          "refresh_token": "e0aca0a308f65d98e32df6dee50cdbd16e15043ef9e11aa2f62d0cd61b6e20444bd450b37d7512c294f28e6b16c02456537e71c4618ea69fda2948869e887a496f81503227c5bbc9d09d032b588e1f7cf40de3398b28",
          "token_type": "Bearer"
        },
        "message": "OK"
      }
    SsoLoginResponseFail:
      value: {
        "code": 41018,
        "message": "无效的手机验证码"
      }